.. _animation-page:

Лайаут, Анимация
================

.. _animation_all_videos:

Все видео рабочий процесс
---------------------------

* `Самое начало (видео) <https://disk.yandex.ru/i/lZMF2WP23D8M-w>`_
* `Сбор контента шота на локаль (видео) <https://disk.yandex.ru/i/Xc4HzxsM7cw4gg>`_
* `Взятие шота в работу от нуля (видео) <https://disk.yandex.ru/i/nPJaK3Rqi9H45w>`_
* `Открытие шота из входящей задачи (видео) <https://disk.yandex.ru/i/DdnTuL4JPd_noA>`_
* `Создание версии рабочего файла и ревью (видео) <https://disk.yandex.ru/i/8rjFLYyC56DWhw>`_
* `Починка шотов (видео) <https://disk.yandex.ru/i/qDOz99n2pfbo3Q>`_

* `[общее] Взять в работу из глобальной версии (видео) <https://disk.yandex.ru/i/JYaW1WCQeMDc6g>`_
* `[общее] Открыть локальную версию (видео) <https://disk.yandex.ru/i/9oVC42fhqFfmiw>`_
* `[общее] Открыть топ версию (видео) <https://disk.yandex.ru/i/1ajRtiMWME_8Kw>`_

.. _animation_tech_rules_all_videos:

Тех требования видео
---------------------

Условия, соблюдая которые анимацию можно будет восстановить функцией :ref:`build-scene-page`, а так же импортировать функцией :ref:`import_animation_from_incoming_task`.

.. note:: Это обязательные условия. Не соблюдение может стать причиной отправки на переработку.

* `Вспомогательные объекты (видео) <https://disk.yandex.ru/i/Fug8IAnsSWN8kQ>`_
* `Парент объектов - Child Of (видео) <https://disk.yandex.ru/i/5WbVvUDLOeCvKw>`_
* `Копии ассетов (видео) <https://disk.yandex.ru/i/IxUQNkSc-ZMiOA>`_
* `Иерархии коллекций (видео) <https://disk.yandex.ru/i/W365EumxY1J5AA>`_


----------------------------

.. note:: Ниже следует текстовое описание, того что есть в видео.

.. _animation_pull_task:

Взятие задачи в работу
------------------------

* Для анимации и лайаута справедливо всё что описано в общем разделе во :ref:`common_pull_task`

* Но есть некоторые дополнения:

.. _animation_pull_task_from_null:

От нуля
~~~~~~~~

`Взятие шота в работу от нуля (Видео) <https://disk.yandex.ru/i/nPJaK3Rqi9H45w>`_

.. note:: нет ни глобальных, ни локальных версий, нет ни каких данных из входящих задач данного шота.

* Надо собрать сцену из компонентов по входящим связям (локация, персонажи):

    * найти задачу в :ref:`tasks-list-page`, после чего кликнуть по кнопке :guilabel:`select` напртив имени задачи (:ref:`tasks_list_select_button`)

    * в открывшейся панеле найти и кликнуть кнопку :guilabel:`Update incoming` (:ref:`selected_panel_update_incoming`) - эта процедура соберёт конент данного шота (локация, персонажи) на ваш локальный комп. 

    .. note:: Если данная процедура уже выполнялась для другого шота, который имеет тот же контент, или вы уверены, что контент уже загружен - то этот шаг можно пропустить. Проверить наличие и свежесть контента можно по кнопке :guilabel:`Sources panel` (:ref:`selected_panel_source_panel`)

    .. note:: Данная процедура довольно длительная, надо будет подождать пока отвиснет кнопка.

    * Выполнить сборку сцены функцией :ref:`build-scene-page`

        .. attention:: Внимательно посмотрите видео к этой функции, есть критические особенности.

    * По окнчании сборки взять в работу текущую сцену :ref:`selected_panel_current_scene_to_work`.

* Загрузить аниматик по кнопке :guilabel:`Download animatic` (:ref:`animation_tools_download_animatic`)
    
.. _animation_pull_task_from_incoming:

Открыть из входящей
~~~~~~~~~~~~~~~~~~~~~

`Открытие шота из входящей задачи (Видео) <https://disk.yandex.ru/i/DdnTuL4JPd_noA>`_

.. note:: нет версий данной задачи, но существуют версии входящей задачи этого же ассета, например исли мы в **animation** и есть уже задача в **layout** или есть **animation**, а мы в задаче **render**.

* взять в работу сцену из входящей задачи :ref:`selected_panel_open_from_incoming`

    .. note:: учитывая что входящая задача шота является составным объектом из локации, её контента и персонажей - при её остутствии ``missing``, или при статусе ``old`` не обязательно запускать :ref:`selected_panel_update_incoming` потому что данная процедура будет выполнять проверку наличия содержимого не только файла данной задачи, но и каждого компонента локации и каждого персонажа. Если вы уверены, что все компоненты уже ранее были загружены, то в данном случае проще загрузить только недостающий файл через :ref:`work_panel_source_panel` выполнив :guilabel:`Reload version`.


-------------------

.. _animation_tech_rules:

Тех требования
-----------------

Условия, соблюдая которые анимацию можно будет восстановить функцией :ref:`build-scene-page`, а так же импортировать функцией :ref:`import_animation_from_incoming_task`.

.. _animation-tech-rules-exipients:

Вспомогательные объекты
~~~~~~~~~~~~~~~~~~~~~~~~~

`Вспомогательные объекты (Видео) <https://disk.yandex.ru/i/Fug8IAnsSWN8kQ>`_

* Все дополнительные вспомогательные объекты (пути, объекты привязок, итд...) размещаем в коллекции **Excipients**. Эта коллекция подтягивается при :ref:`build-scene-page`.

    * кривые которые используются как пути, должны быть названы так, что бы по его имени было понятно какой контрол, какого персонажа на неё цепляется.

    * если у персонажа нет встроенного коннекта на кривую (кнопка) то лучше на кривую цеплять пустышку (так же помещать в **Excipients**), на которую чилдоффить самого персонажа, тогда эта конструкция полностью восстановится билдом.

Паренты объектов
~~~~~~~~~~~~~~~~~~~~

`Child Of (Видео) <https://disk.yandex.ru/i/5WbVvUDLOeCvKw>`_

* Парент объектов использовать нельзя.

* Используем констрейн **Child Of**.

    * данным контсрейном связываются только контролы рига, в объектном режиме не применяем.

    * обязательно нужны ключи на включение этого констрейна и на контрол в момент включения, даже если взаимодействие начинается сразу в первом кадре.

        * Для случаев разового парента, когда контрол использует один объект привязки с разовым включением-отключением,  можно воспользоваться инструментом из плагина, этот инструмент не создаёт сам контсрейн, только все необходимые ключи.
        
            .. image:: ../../_static/images/animation_tools_child_of.png
            
            `Видео база <https://disk.yandex.ru/i/a6lloZysHRQzuw>`_  `Видео изменение стартового положения <https://disk.yandex.ru/i/m36XgFy9SX3wfw>`_

        * Для активной анимации, многократиного включения и отключения пользуйтесь *Dynamic Parent* (`Page <https://github.com/romanvolodin/dynamic_parent/blob/master/README-ru.md>`_) или подобными.

        * основная суть этих инструментов:

            #. содаются два ключа в соседних кадрах на включение или отключение констрейна параметр ``influence`` 0-1 или 1-0.

            #. создаются ключи на сам контрол в фактическом его место расположении, ``visual`` ключи.

            #. анимация созданная таким образом должна восстанавливаться :ref:`build-scene-page` или :ref:`import_animation_from_incoming_task`.

        .. attention:: Даже если объект просто прицеплен Чилд офом, без какой либо перспективы анимирования самого объекта, вышеописанная пра ключей (п. 1, 2) в начале шота на включение Чилд Оф констрейна и на положение самого объекта обязательны.


Копии ассетов
~~~~~~~~~~~~~~

`Копии ассетов (Видео) <https://disk.yandex.ru/i/IxUQNkSc-ZMiOA>`_

* Копирование делается самих оверрайдных коллекций ассетов.

    * Клик правой кнопкой мыши по коллекции ассета ``CharName_rig`` и выбираем в контекстном меню ``Duplikate Collection``.

    * Имена копий редактировать нельзя, оставлять автонумерацию.


Иерархии коллекций
~~~~~~~~~~~~~~~~~~~~

`Иерархии коллекций (Видео) <https://disk.yandex.ru/i/W365EumxY1J5AA>`_

* Иерархии оверрайдных коллекций редактировать нельзя.

.. _animation-tech-rules-animation-keys:

Анимационные ключи
~~~~~~~~~~~~~~~~~~~~~

#. Нельзя оставлять не запечённые на контролы NLA клипы.

#. Если у пропса или персонажа сдвинут контрол - должен быть ключ.


-------------------


Отправка отчёта
-----------------

`Создание версии рабочего файла и ревью (Видео) <https://disk.yandex.ru/i/8rjFLYyC56DWhw>`_

* Отправка в серебру плейбласта + версии рабочего файла - :ref:`work_panel_playblast_playblast_to_version` с коммитом.

.. image:: ../../_static/images/wp_playblast_to_version.png


Общение в чате по задаче
--------------------------

* **web** чат по задаче открывается кнопкой :guilabel:`Open by web` - :ref:`work_panel_open_last_commit_by_web`

.. image:: ../../_static/images/wp_open_by_web.png